"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MagicEvent=window.MagicEvent||function(){var e={},a={},d={},y=0,p=function(n){if(0!==a[n.type].length)for(var e=a[n.type].filter(function(e){var t=n.target.matches(e.selector)||n.target.closest(e.selector);return!!t&&(!0===t&&(t=n.target),(!e.unique||!e.unique[t.uniqueId])&&(e.el=[t,function(e,t){for(var n=0,o=e;o!==t;)o=o.parentNode,n++;return n}(n.target,t)],!0))}).sort(function(e,t){return e.el[1]-t.el[1]}),t=0;t<e.length&&!n.cancelBubble;t++)Object.defineProperty(n,"delegateTarget",{writable:!0,value:e[t].el[0]}),e[t].func.bind(e[t].el[0])(n),e[t].unique&&(e[t].el[0].uniqueId||(e[t].el[0].uniqueId=y++),e[t].unique[e[t].el[0].uniqueId]=!0),e[t].el=null},o=function(e,l,f){var s=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return e&&f&&l&&"string"==typeof e&&("string"==typeof l||"object"===(void 0===l?"undefined":_typeof(l)))&&"function"==typeof f&&e.split(" ").forEach(function(e){var t={selector:l,func:f};"object"===(void 0===l?"undefined":_typeof(l))&&(l.id||l.setAttribute("id","event-"+y++),t.selector="#"+l.id);var n,o,r,c,i,u=!0;"scroll"===e&&(n=t.selector,o=t.func,document.querySelectorAll(n).forEach(function(e){e.addEventListener("scroll",o)}),u=!1),d[e]||(r=e,c=u,i=new Event(r,{cancelable:!0,bubbles:!0}),a[r]=[],d[r]=i,c&&document.addEventListener(r,p)),s&&(t.unique={}),a[e].push(t)}),this};return e.emit=function(e,t,n){if(e&&t){var o=void 0;if(o=d[e]&&!n?d[e]:new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:n}),"string"==typeof t)document.querySelectorAll(t).forEach(function(e){e.dispatchEvent(o)});else t.dispatchEvent(o)}return this},e.on=function(e,t,n){return o(e,t,n),this},e.one=function(e,t,n){return o(e,t,n,!0),this},e.off=function(e,o,r){return"string"==typeof e&&e.split(" ").forEach(function(e){if(a[e]){var t=a[e].filter(function(e){return!((e.selector===o||e.selector==="#"+o.id)&&(t=r,n=e.func,""+t==""+n));var t,n});a[e]=t}}),this},e.offAll=function(){return Object.keys(a).forEach(function(e){a[e]=[]}),this},function(){if(Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}}(),e}();